{"version":3,"sources":["tonva-tools/entry/changePassword.tsx"],"names":["ChangePasswordPage","react__WEBPACK_IMPORTED_MODULE_1__","[object Object]","this","schema","name","type","maxLength","required","uiSchema","items","orgPassword","label","placeholder","newPassword","newPassword1","submit","widget","className","onSubmit","context","tslib__WEBPACK_IMPORTED_MODULE_0__","data","setError","centerAppApi","_net__WEBPACK_IMPORTED_MODULE_3__","undefined","changePassword","_ui__WEBPACK_IMPORTED_MODULE_2__","replace","header","back","onButtonClick","fieldLabelSize"],"mappings":"oLAIO,MAAMA,UAA2BC,EAAA,UAAxCC,kCACYC,KAAAC,OAAuB,CAC3B,CAACC,KAAK,cAAeC,KAAM,SAAUC,UAAW,GAAIC,UAAU,GAC9D,CAACH,KAAK,cAAeC,KAAM,SAAUC,UAAW,GAAIC,UAAU,GAC9D,CAACH,KAAK,eAAgBC,KAAM,SAAUC,UAAW,GAAIC,UAAU,GAC/D,CAACH,KAAK,SAAUC,KAAM,WAElBH,KAAAM,SAAqB,CACzBC,MAAO,CACHC,YAAa,CACTC,MAAO,qBACPC,YAAa,8CAEjBC,YAAa,CACTF,MAAO,qBACPC,YAAa,8CAEjBE,aAAc,CACVH,MAAO,2BACPC,YAAa,oDAEjBG,OAAQ,CACJC,OAAQ,SACRL,MAAO,eACPM,UAAW,qBAKff,KAAAgB,SAAW,EAAOd,EAAae,IAAkCC,EAAA,EAAAlB,UAAA,qBACrE,IAAIQ,YAACA,EAAWG,YAAEA,EAAWC,aAAEA,GAAgBK,EAAQE,KACvD,GAAIR,IAAgBC,EAEhB,YADAK,EAAQG,SAAS,eAAgB,sEAGrC,IAAIC,EAAe,IAAIC,EAAA,EAAa,WAAOC,IAE/B,WADIF,EAAaG,eAAe,CAAChB,YAAaA,EAAaG,YAAYA,KAKnFc,EAAA,IAAIC,QAAQ5B,EAAA,cAAC2B,EAAA,KAAI,CAACE,OAAO,2BAAOC,KAAK,SACjC9B,EAAA,qBAAKiB,UAAU,qBAAmB,gDAJlCE,EAAQG,SAAS,cAAe,qCAWxCrB,SACI,OAAOD,EAAA,cAAC2B,EAAA,KAAI,CAACE,OAAO,4BAChB7B,EAAA,cAAC2B,EAAA,KAAI,CACDV,UAAU,MACVd,OAAQD,KAAKC,OACbK,SAAUN,KAAKM,SACfuB,cAAe7B,KAAKgB,SACpBc,eAAgB","file":"static/js/2.ea4811f3.chunk.js","sourcesContent":["import * as React from 'react';\r\nimport { VPage, Page, Form, ItemSchema, UiSchema, StringSchema, UiTextItem, UiPasswordItem, Context, ButtonSchema, UiButton, nav } from '../ui';\r\nimport { CenterAppApi } from '../net';\r\n\r\nexport class ChangePasswordPage extends React.Component {\r\n    private schema: ItemSchema[] = [\r\n        {name:'orgPassword', type: 'string', maxLength: 60, required: true} as StringSchema,\r\n        {name:'newPassword', type: 'string', maxLength: 60, required: true} as StringSchema,\r\n        {name:'newPassword1', type: 'string', maxLength: 60, required: true} as StringSchema,\r\n        {name:'submit', type: 'button'} as ButtonSchema\r\n    ];\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            orgPassword: {\r\n                label: '原密码',\r\n                placeholder: '输入原来的密码'\r\n            } as UiPasswordItem,\r\n            newPassword: {\r\n                label: '新密码',\r\n                placeholder: '输入新设的密码'\r\n            } as UiPasswordItem,\r\n            newPassword1: {\r\n                label: '确认密码', \r\n                placeholder: '再次输入新设密码'\r\n            } as UiPasswordItem,\r\n            submit: {\r\n                widget: 'button',\r\n                label: '提交',\r\n                className: 'btn btn-primary'\r\n            } as UiButton,\r\n        }\r\n    };\r\n\r\n    private onSubmit = async (name:string, context: Context):Promise<any> => {\r\n        let {orgPassword, newPassword, newPassword1} = context.data;\r\n        if (newPassword !== newPassword1) {\r\n            context.setError('newPassword1', '新密码错误，请重新输入');\r\n            return;\r\n        }\r\n        let centerAppApi = new CenterAppApi('tv/', undefined);\r\n        let ret = await centerAppApi.changePassword({orgPassword: orgPassword, newPassword:newPassword});\r\n        if (ret === false) {\r\n            context.setError('orgPassword', '原密码错误');\r\n            return;\r\n        }\r\n        nav.replace(<Page header=\"修改密码\" back=\"close\">\r\n            <div className=\"m-3  text-success\">\r\n                密码修改成功！\r\n            </div>\r\n        </Page>);\r\n        return;\r\n    }\r\n\r\n    render() {\r\n        return <Page header=\"修改密码\">\r\n            <Form\r\n                className=\"m-3\" \r\n                schema={this.schema}\r\n                uiSchema={this.uiSchema}\r\n                onButtonClick={this.onSubmit}\r\n                fieldLabelSize={2} />\r\n        </Page>;\r\n    }\r\n}\r\n"],"sourceRoot":""}